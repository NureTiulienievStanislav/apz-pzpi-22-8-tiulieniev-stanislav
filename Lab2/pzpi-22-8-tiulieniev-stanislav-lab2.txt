Міністерство освіти та науки України
Харківський національний університет
радіоелектроніки


Кафедра ПІ


Звіт
З лабораторної роботи 2
з дисципліни «Архітектура програмного забезпечення»
на тему: «Розробка програмної архітектури, створення та
відлагодження програмного коду серверної частини
програмної системи»




Виконав:	Перевірив:
ст. гр. ПЗПІ-22-8	ст. викладач Сокорчук І.П.
Тюлєнєв С.О.	 



Харків 2025



Мета роботи:
Потрібно розробити серверну / back-end частину програмної системи.

Історія змін:
№	Дата	Версія	Опис змін	Автор
1	21.05.2025	0.1	Створено структуру звіту	Тюлєнєв Станіслав
2	22.05.2025	0.2	Додано діаграми та інженерні рішення	Тюлєнєв Станіслав
3	23.05.2025	1.0	Фіналізовано звіт	Тюлєнєв Станіслав

Опис виконаної роботи:
Було створено архітектуру та реалізовано всі ключові компоненти програмної системи TrackWay. Програмна система TrackWay побудована з урахуванням багаторівневої архітектури, яка включає презентаційний рівень (веб-інтерфейс і мобільний додаток), серверну частину (REST API на Node.js) та базу даних (MongoDB).
ER-модель системи базується на трьох основних сутностях: користувачі (users), транспортні засоби (vehicles) та маршрути (routes). Користувач може мати кілька автомобілів, а кожен автомобіль може бути пов’язаний з одним або кількома маршрутами. Структура реалізована через Mongoose-схеми з використанням ObjectId-посилань.
Комунікація між компонентами програмної системи реалізована через REST API. Передбачено такі запити: авторизація (POST /login), реєстрація (POST /register), додавання авто (POST /vehicles), перегляд списку (GET /vehicles), видалення (DELETE /vehicles/:id) та створення маршрутів (POST /routes). Доступ до захищених маршрутів здійснюється лише після передачі JWT-токена.
У серверній частині використовуються наступні технології: Node.js, Express.js, MongoDB з Mongoose, бібліотека jsonwebtoken для роботи з токенами авторизації, bcrypt для шифрування паролів, dotenv для керування змінними середовища та cors для кросдоменного доступу.
Для підтримки багатомовності реалізована базова інтерналізація — повідомлення можуть бути локалізовані у JSON-файлах відповідно до мови, вказаної в заголовку Accept-Language HTTP-запиту.
Серверна логіка побудована на модульній структурі: файл app.js відповідає за ініціалізацію сервера та підключення маршрутів, бази даних, middleware. Контролери реалізують функціональність для роботи з користувачами, транспортними засобами, маршрутами. Система перевіряє автентичність кожного запиту, застосовуючи middleware для обмеження доступу за ролями.
Функціональне тестування серверної частини проводилось за допомогою Swagger UI та Postman. Було протестовано логін, реєстрацію, обмеження доступу для ролей, додавання та видалення транспортних засобів, обробку помилок, перевірку заголовків авторизації та загальну відповідність API специфікації.
ER-діаграма системи TrackWay відображає логічну структуру бази даних, яка включає сутності users, vehicles та routes. Кожна з них містить ключові атрибути: користувач — ім’я, пароль, роль; транспортний засіб — марку, модель, рік, VIN-код; маршрут — початкову і кінцеву позиції, прив’язку до авто.
UML-діаграма прецедентів демонструє типові сценарії взаємодії користувачів з системою. Диспетчер має повний доступ до всіх функцій: авторизація, керування автопарком, призначення маршрутів. Водій може авторизуватись та переглядати призначені йому транспортні засоби.
Діаграма розгортання описує компоненти, які беруть участь у роботі системи: веб-клієнт на React, мобільний додаток на Kotlin, сервер на Node.js, база даних MongoDB. Усі компоненти взаємодіють через HTTP-протоколи.
Діаграма діяльності відображає кроки користувача під час додавання транспортного засобу: введення даних, перевірка прав доступу, надсилання запиту, обробка відповіді та оновлення списку в інтерфейсі.
Серверні компоненти включають:
-	UserController — обробка реєстрації, авторизації, видалення користувача
-	VehicleController — логіка створення, перегляду та видалення транспортних засобів
-	RouteController — створення маршрутів
-	AuthMiddleware — перевірка JWT-токенів, контроль доступу за роллю

Висновки:
У результаті виконання лабораторної роботи було створено програмну систему TrackWay з реалізацією клієнтської частини, серверного API та структури бази даних. Система підтримує облік транспортних засобів, рольову авторизацію і відповідає сучасним вимогам архітектури програмного забезпечення.

 
ДОДАТОК А
Посилання на відеозапис доповіді

Відеозапис доповіді на YouTube: https://youtu.be/prwsijsgE2A
Нижче наведено хронологічний опис доповіді.
00:00 – Вітання.
0:20 – Функція реєстрації користувача.
0:35 – Функція авторизації користувача.
01:07 – Функція видалення користувача.
01:20 – Функція показу автомобілів. 
01:30 – Функція видалення автомобілів. 
01:42 – Функції додавання автомобілів.
01:43 – Завершення.




ДОДАТОК Б

 
Рисунок Б.1 — ER-діаграма даних
 
Рисунок Б.2 — Структура бази даних
 
Рисунок Б.3 — UML-діаграма прецедентів
 
Рисунок Б.4 — діаграма розгортання
 
Рисунок Б.5 — діаграма діяльності




ДОДАТОК В
Програмий код

В.1 Обробка списку транспортних засобів
1 function groupVehiclesByYear(vehicleList) {
2   const result = {}
3
4   for (const vehicle of vehicleList) {
5     const year = vehicle.year || 'невідомо'
6     if (!result[year]) {
7       result[year] = []
8     }
9     result[year].push(vehicle)
10   }
11
12   return result
13 }




В.2 Додавання транспортного засобу з перевіркою VIN
1 exports.createVehicle = async (req, res) => {
2   try {
3     const { make, model, year, vin } = req.body
4
5     if (!make || !model || !year || !vin) {
6       return res.status(400).json({ message: 'Не всі поля заповнено' })
7     }
8
9     const duplicate = await Vehicle.findOne({ vin })
10     if (duplicate) {
11       return res.status(409).json({ message: 'Такий VIN вже існує' })
12     }
13
14     const vehicle = new Vehicle({ make, model, year, vin })
15     await vehicle.save()
16
17     res.status(201).json(vehicle)
18   } catch (err) {
19     res.status(500).json({ message: 'Помилка на сервері' })
20   }
21 }



В.3 Видалення транспортного засобу за ID
1 exports.deleteVehicle = async (req, res) => {
2   try {
3     const { id } = req.params
4     const vehicle = await Vehicle.findByIdAndDelete(id)
5
6     if (!vehicle) {
7       return res.status(404).json({ message: 'Авто не знайдено' })
8     }
9
10     res.status(200).json({ message: 'Авто успішно видалено' })
11   } catch (err) {
12     res.status(500).json({ message: 'Помилка сервера' })
13   }
14 }
